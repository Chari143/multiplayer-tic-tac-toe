services:
  # CockroachDB is not available on Render free tier
  # We'll use Render's PostgreSQL instead
  - type: pserv
    name: nakama-db
    plan: free
    env: docker
    dockerfilePath: ./backend/Dockerfile.db
    
  # Nakama Server
  - type: web
    name: nakama-server
    plan: free
    env: docker
    dockerfilePath: ./backend/Dockerfile
    envVars:
      - key: NAKAMA_DATABASE_ADDRESS
        fromService:
          name: nakama-db
          type: pserv
          property: connectionString
    healthCheckPath: /
